<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_13) on Wed Aug 05 13:11:58 EDT 2009 -->
<TITLE>
ARCSubmitter
</TITLE>

<META NAME="date" CONTENT="2009-08-05">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ARCSubmitter";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../edu/psu/ist/youseer/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../edu/psu/ist/youseer/Extractor.html" title="class in edu.psu.ist.youseer"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?edu/psu/ist/youseer/ARCSubmitter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ARCSubmitter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
edu.psu.ist.youseer</FONT>
<BR>
Class ARCSubmitter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>edu.psu.ist.youseer.ARCSubmitter</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>ARCSubmitter</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>Title: ARCSubmitter</p>

 <p>Description: Read the configuration file, initilize the database, and create the tables if they don't exist
 The default database is SQLite, but if you prefer to use a server side database, feel free to modify the configuration file
 and provide the connection string for the database.
 This class creates a thread pool of Worker runnables to handle the ARC records retrieved from the ARC file.
 The order of tasks as follows: 1) parse the input parameters, 2) parse the configuration files and build a configuration object, 3)
 Establisht the database connection, 4) iterate through the input folder and process all the (new) ARC fiels in it (Depth First). 5) for each ARC record
  in the ARC file, this class creates a SubmitterDocument object and submit the object to the thread pool for processing.
 After processing the entire ARC file, the log is inserted to the database and the thread waits for the thread pool to
 finish executing before reading the next ARC file.
 When it finish processing all the files in the folder, the thread waits for a specified period (default is 5 minutes) before making another scan
 in the folder to find new ARC files. Thus it can run in parallel with the crawler and waits for the new dumps.
 </p>

 <p>Copyright: Copyright Madian Khabsa @ Penn State(c) 2009</p>

 <p>Company: Penn State</p>
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#CacheFolder">CacheFolder</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The virtual path that will have the ARV files in it</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../edu/psu/ist/youseer/SubmitterConfig.html" title="class in edu.psu.ist.youseer">SubmitterConfig</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#Config">Config</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cinfiguration object</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#Count">Count</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of documents submitted so far</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Vector&lt;<A HREF="../../../../edu/psu/ist/youseer/SubmitterDocument.html" title="class in edu.psu.ist.youseer">SubmitterDocument</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#IndexedDocs">IndexedDocs</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List of documents that have been indexed but not yet inserted to the database</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#LINE_SEP">LINE_SEP</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Line separator</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#OrgiginalPart">OrgiginalPart</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The root folder of the ARC files</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.concurrent.ExecutorService</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#threadExecutor">threadExecutor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#threadsCount">threadsCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of threads for processing the documents, default is 1</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#URL">URL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL of th eindex</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.concurrent.BlockingQueue&lt;java.lang.Runnable&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#WaitQueue">WaitQueue</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queue containing the waiting jobs in the thread pool</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#ARCSubmitter()">ARCSubmitter</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#FlushIndexedDocs()">FlushIndexedDocs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert all the processed URLs (ARC records) to the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#InsertToDB(java.io.File)">InsertToDB</A></B>(java.io.File&nbsp;fi)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inserts this file to the database when the submitter completes processing all its records</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#IsIndexed(java.io.File)">IsIndexed</A></B>(java.io.File&nbsp;fi)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check whether the file has been already submitted to the index or not</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#main(java.lang.String[])">main</A></B>(java.lang.String[]&nbsp;args)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#ProcessFolder(java.lang.String)">ProcessFolder</A></B>(java.lang.String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process a folder full of ARC files, or subfolders containing ARC files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#ReadBinaryDocument(org.archive.io.arc.ARCRecord, int, int)">ReadBinaryDocument</A></B>(org.archive.io.arc.ARCRecord&nbsp;record,
                   int&nbsp;offset,
                   int&nbsp;recordLength)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reads the content of the ARC record from the ARC file</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#ReadTextDocument(org.archive.io.arc.ARCRecord, int)">ReadTextDocument</A></B>(org.archive.io.arc.ARCRecord&nbsp;record,
                 int&nbsp;offset)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reads a text document from the ARC record</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#sendPostCommand(java.lang.String, java.lang.String)">sendPostCommand</A></B>(java.lang.String&nbsp;command,
                java.lang.String&nbsp;url)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a post request to the server
 Courtesy of Grant Ingersoll @ IBM</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../edu/psu/ist/youseer/ARCSubmitter.html#setupDBConnection()">setupDBConnection</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Setup the database connection and create the mandatary tables</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="OrgiginalPart"><!-- --></A><H3>
OrgiginalPart</H3>
<PRE>
public java.lang.String <B>OrgiginalPart</B></PRE>
<DL>
<DD>The root folder of the ARC files
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="CacheFolder"><!-- --></A><H3>
CacheFolder</H3>
<PRE>
public java.lang.String <B>CacheFolder</B></PRE>
<DL>
<DD>The virtual path that will have the ARV files in it
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="URL"><!-- --></A><H3>
URL</H3>
<PRE>
public java.lang.String <B>URL</B></PRE>
<DL>
<DD>URL of th eindex
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="Count"><!-- --></A><H3>
Count</H3>
<PRE>
public long <B>Count</B></PRE>
<DL>
<DD>Number of documents submitted so far
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="Config"><!-- --></A><H3>
Config</H3>
<PRE>
public <A HREF="../../../../edu/psu/ist/youseer/SubmitterConfig.html" title="class in edu.psu.ist.youseer">SubmitterConfig</A> <B>Config</B></PRE>
<DL>
<DD>Cinfiguration object
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="threadsCount"><!-- --></A><H3>
threadsCount</H3>
<PRE>
public int <B>threadsCount</B></PRE>
<DL>
<DD>The number of threads for processing the documents, default is 1
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="threadExecutor"><!-- --></A><H3>
threadExecutor</H3>
<PRE>
public java.util.concurrent.ExecutorService <B>threadExecutor</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="WaitQueue"><!-- --></A><H3>
WaitQueue</H3>
<PRE>
public java.util.concurrent.BlockingQueue&lt;java.lang.Runnable&gt; <B>WaitQueue</B></PRE>
<DL>
<DD>Queue containing the waiting jobs in the thread pool
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="IndexedDocs"><!-- --></A><H3>
IndexedDocs</H3>
<PRE>
public java.util.Vector&lt;<A HREF="../../../../edu/psu/ist/youseer/SubmitterDocument.html" title="class in edu.psu.ist.youseer">SubmitterDocument</A>&gt; <B>IndexedDocs</B></PRE>
<DL>
<DD>List of documents that have been indexed but not yet inserted to the database
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="LINE_SEP"><!-- --></A><H3>
LINE_SEP</H3>
<PRE>
public static final java.lang.String <B>LINE_SEP</B></PRE>
<DL>
<DD>Line separator
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ARCSubmitter()"><!-- --></A><H3>
ARCSubmitter</H3>
<PRE>
public <B>ARCSubmitter</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="main(java.lang.String[])"><!-- --></A><H3>
main</H3>
<PRE>
public static void <B>main</B>(java.lang.String[]&nbsp;args)</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>args</CODE> - String[] Command-line arguments to process
 Parameter 1: The URL of the indexer
 Parameter 2: The folder to process which contains the ARC files
 Parameter 3: The virtual directory under which the ARC files will be mapped to
 Parameter 4: Number of threads to run
 Parameter 5: [OPTIONAL] The waiting that the submitter will wait before iterating through the folder again</DL>
</DD>
</DL>
<HR>

<A NAME="setupDBConnection()"><!-- --></A><H3>
setupDBConnection</H3>
<PRE>
public boolean <B>setupDBConnection</B>()
                          throws java.lang.Exception</PRE>
<DL>
<DD>Setup the database connection and create the mandatary tables
<P>
<DD><DL>

<DT><B>Returns:</B><DD>boolean true if connected, false otherwise
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="InsertToDB(java.io.File)"><!-- --></A><H3>
InsertToDB</H3>
<PRE>
private boolean <B>InsertToDB</B>(java.io.File&nbsp;fi)</PRE>
<DL>
<DD>Inserts this file to the database when the submitter completes processing all its records
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fi</CODE> - File the file to be inserted to the database. It only inserts the full path of the file
<DT><B>Returns:</B><DD>boolean true if the insert was committed, otherwise false</DL>
</DD>
</DL>
<HR>

<A NAME="IsIndexed(java.io.File)"><!-- --></A><H3>
IsIndexed</H3>
<PRE>
private boolean <B>IsIndexed</B>(java.io.File&nbsp;fi)</PRE>
<DL>
<DD>Check whether the file has been already submitted to the index or not
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fi</CODE> - File The file to be checked
<DT><B>Returns:</B><DD>boolean True if found in the database, false otherwise</DL>
</DD>
</DL>
<HR>

<A NAME="ProcessFolder(java.lang.String)"><!-- --></A><H3>
ProcessFolder</H3>
<PRE>
public void <B>ProcessFolder</B>(java.lang.String&nbsp;path)</PRE>
<DL>
<DD>Process a folder full of ARC files, or subfolders containing ARC files. The exploring follows depth first paradigm
 For each file, the processor checks if the file has been indexed before, if so it ignores it. If the file is new then it
 iterates through all the ARC records in this file. For each ARC record (which contains the downloaded document and metadata
  about it) it reads the document and its metadata, then it creates a SubmitterDocument object. This object will be submitted
 to the thread pool that is responsible of parsing, extracting and handling the data before submitting it to the index.

 After processing a file and before moving to the next file, it waits for the processing thread pool to finish executing
 and commit all the URLs to the database.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - String the absolute path of the containing folder</DL>
</DD>
</DL>
<HR>

<A NAME="FlushIndexedDocs()"><!-- --></A><H3>
FlushIndexedDocs</H3>
<PRE>
private void <B>FlushIndexedDocs</B>()</PRE>
<DL>
<DD>Insert all the processed URLs (ARC records) to the database. The database will contain the Url, file type, indexing time
 containing folder, and the record offset within the ARC file
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="ReadBinaryDocument(org.archive.io.arc.ARCRecord, int, int)"><!-- --></A><H3>
ReadBinaryDocument</H3>
<PRE>
public byte[] <B>ReadBinaryDocument</B>(org.archive.io.arc.ARCRecord&nbsp;record,
                                 int&nbsp;offset,
                                 int&nbsp;recordLength)</PRE>
<DL>
<DD>Reads the content of the ARC record from the ARC file
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>record</CODE> - ARCRecord the record that its content is to be read<DD><CODE>offset</CODE> - int the offset at which the content of the document begins<DD><CODE>recordLength</CODE> - int
<DT><B>Returns:</B><DD>byte[] the byte array containing the document data</DL>
</DD>
</DL>
<HR>

<A NAME="ReadTextDocument(org.archive.io.arc.ARCRecord, int)"><!-- --></A><H3>
ReadTextDocument</H3>
<PRE>
public java.lang.String <B>ReadTextDocument</B>(org.archive.io.arc.ARCRecord&nbsp;record,
                                         int&nbsp;offset)</PRE>
<DL>
<DD>Reads a text document from the ARC record
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>record</CODE> - ARCRecord the record that its content is to be read<DD><CODE>offset</CODE> - int the offset at which the content of the document begins
<DT><B>Returns:</B><DD>String the content of the text document</DL>
</DD>
</DL>
<HR>

<A NAME="sendPostCommand(java.lang.String, java.lang.String)"><!-- --></A><H3>
sendPostCommand</H3>
<PRE>
public java.lang.String <B>sendPostCommand</B>(java.lang.String&nbsp;command,
                                        java.lang.String&nbsp;url)
                                 throws java.lang.Exception</PRE>
<DL>
<DD>Sends a post request to the server
 Courtesy of Grant Ingersoll @ IBM
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>command</CODE> - String the command to be sent<DD><CODE>url</CODE> - String the URL of the server
<DT><B>Returns:</B><DD>String The result of the submit
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../edu/psu/ist/youseer/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../edu/psu/ist/youseer/Extractor.html" title="class in edu.psu.ist.youseer"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?edu/psu/ist/youseer/ARCSubmitter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ARCSubmitter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
